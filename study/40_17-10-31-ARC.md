# 40_17-10-31

---


## ARC

alloc, retain 을 사용하면, ARC 가 증가됨,

Obecjtive-c에서 인스턴스를 넣었을때 Referene Count가 증가하지 않음, 명령어로 명시적으로 표현해주어야함. 참조는 하는데 Reference Count가 증가하지 않음. 

메모리를 직접적으로 관리 한다면 성능이 증가 시킬수 있음. 



alloc 인스턴스 생성 

같은 인스턴스를 retain과, release 하지 않으면, 메모리가 계속 좀비처럼 남아 있어서, 사라지지 않음. 

```swift

NSString *str1 = [[NSString alloc] init];
NSString *str2 = [[NSString alloc] init];
NSString *str3 = [[NSString alloc] init];
str2 = [[NSString alloc] init];
[str1 release];
[str2 release];
[str3 release];


```

> retain을 해주는게 오너쉽을 전달 한다는 의미이다.
> 


- C 언어에서
malloc 할당 
malloc : memory allocate
alloc 해제



- 새롭게 나온 키워드 strong, weak


swift에서는 우리가 아무것도 정해주지 않았을때 사용되는 ARC는 strong 임.. 

class 에서 인스턴스로 생성하면, 기본적으로 스트롱으로 정의가됨. 


`weak` 가 애초에 옵셔널이면 정의할수 있지만, 다른사람이 만든것을 받기만 해야하는데, 단일 변수로 weak 를 생성할수 없다.


```swift

// weak 로 하나를 정의할때 '?' 을 붙여주지 않으면 정의가 되지 않음. 컴파일러가 ?를 붙여주라고 얘기를 함.. 그래서 c를 print를 찍어보면, nil이 나옴 .
weak var c: testARC? = testARC()

print(c)
dump(c)

```

---


## 순환참조

객체 1 -> 


스토리보드에서, IBOutlet을 하게되면 디폴트 값으로 weak 를 가져오는데, 그 이유는 `addsubView` 에 있다..?


스토리보드도 결국에는 인스턴스 이고 storyboard 도 결국 인스턴스를 생성 시키기 때문에, UIView에 인스턴스를 생성 시킨다. 

그래서 스토리보드로 인스턴스를 생성할때와, 그냥 코드로 인스턴스를 생성할때 메모리에 대한것을 고민 해야 될것 같다 `weak, strong`  


weak 가 필요한 부분은 closure의 캡쳐 부분을 사용할때 weak 로 사용하면 좋다.


- 예제코드


```swift

self.view.frame = {

}

closure가 캡쳐를 하게 되면 애초에 Viewcontroller의 인스턴스의 ref 를 1 증가시킴.


```

> closure 를 인스턴스로 사용할때는 weak 를 사용하는개 좋다는게 음... 진짜 의미를 


---

## Unowned vs Weak

- Unowned : 소유권이 없는 참조임을 나타내는 지시어 절대 옵셔널일수 없음 

- Weak : nil 일수도 있다. 

-> Weak 가 무조건 안전하다고 할수 없음. nil을 피한다고 문제가 해결되는것은 아님.. 크러쉬가 나게 해야 하는 부분은 크러쉬를 내주어야 하는 부분이 존재함.. 이 부분은 명확하게 짚고 넘어가자



---



---

## Reference 


[Transitioning to ARC Release Notes](https://developer.apple.com/library/content/releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226-CH1-SW14)<br>

[About Memory Management](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html#//apple_ref/doc/uid/10000011i)<br>

[Memory Management Programming Guide for Core Foundation](https://developer.apple.com/library/content/documentation/CoreFoundation/Conceptual/CFMemoryMgmt/CFMemoryMgmt.html#//apple_ref/doc/uid/10000127i)<br>


---

## UX/UI 특강 


일반적으로 Desgin 이라고 하면, 스케치 하는것을 생각할수 있는데, 설계하는 의미도 있음.. 

HCI(인지공학) 한번 찾아보자

UX - 일종의 법을 어떻게 조금더 쉽게 해줄것인가에 대한 고민들인것 같음..







