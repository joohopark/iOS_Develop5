## 기윤님 소스


유데미의 마크 프라이스 강의


마크 프라이스
`json formatter` -> 외부 데이터를 json 형태로 변형 시켜 주는 formatter 

셈플로 api call 을 하게되면 json으로 요청을 받아서 
자기만의 고유한 key 값을 함께 필요한 data에 URL을 요청하게되면, 우너하는 값을 얻을수 있다.
알라모파이어로 요청을 할때, URL 값으로 보내고, 결과값을 받아서 사용하는것임.. 아.. 

`초기에 설정 api -> openweather URL -> 알라모파이어` 
레포에 이슈가 생겼을때, github에서 제공해줌.. 이슈 트레킹. 
github으로 인증하면, 인증하는 방법은 `oAuto` -> github의 Login API


데이터는 실시간으로 네트워크 통신을 통해서 가져오게됨..
callbackurl -> 다시 내 앱으로 돌아올수 있게 하는 url
테이블뷰 같지만 사실은 콜렉션 뷰이고, 셀 사이즈를 다시 작성하게 해줍니다. 

테이블뷰 같지만, 컬렉션 뷰처럼 쓰이는

1. <br>

```swift

extension IssuesViewController: UICollectionViewDelegate {
    
    func collectionView(_ collectionView: UICollectionView, willDisplay cell: UICollectionViewCell, forItemAt indexPath: IndexPath) {
        loadMore(indexPath: indexPath)
    }    
}

** 콜렉션 뷰에 Delegate 메소드중에 willDisplay가 있는데 요기서 인덱스 정보를 받아서 loadMore()에 인덱스 정보를 넘겼구요-!
```

2. <br>

```swift
func loadMore(indexPath: IndexPath) {
        guard indexPath.item == dataSource.count - 1 && !isLoading && canLoadMore else { return }
        load()
    }

** 요기서 이제 index가 전체 dataSource의 카운트라면 (즉 맨 마지막 셀이라면!) (일단 &&뒤는 무시하세요!)
```

3. <br>

```swift

func load() {
        guard isLoading == false else { return }
        isLoading = true
        
        App.api.repoIssues(owner: owner, repo: repo, page: page) { [weak self] (dataResponse: DataResponse<[Model.Issue]>) in
            guard let weakSelf = self else { return }
            switch dataResponse.result {
            case .success(let items):
                weakSelf.isLoading = false
                weakSelf.dataLoaded(items: items)
            case .failure:
                weakSelf.isLoading = false
                break
            }
        }
    }
로드 함수를 보면, 여기서 다시 api를 요청하거든요!
깃헙 API 가이드를 보면 repo > issue에 page 정보가 있어서 page를 1개 더 올려서 요청을 하면, 그 다음 데이터를 불러올 수 있거든요! 
그래서 page += 1 요청을 하게끔 dataLoaded()라는 곳에서 설계를 해두었고, load()는 불릴 때마다 page가 1개씩 + 해서 요청을 다시하는 구조입니다!
```

> load가 된 데이터는 `weakSelf.dataLoaded(items: items)` 쌓고, 다시 리 로드 데이터를 하는 방식으로 동작 되는것 같다.



---


## Reference 

[Swift 함수에 커링 사용하기 Reaim](https://academy.realm.io/kr/posts/currying-on-the-swift-functions/) <br>
[github의 Issues를 긁어 오는 OPEN API](https://github.com/younari/CodeKit)<br>
[API 를 꼽고 -> 거기에서 어떤 정보들을 받아서 -> Alramofire 를 이용해서 JSON 데이터로 변환 된 값을 가져와서, 로드 해주는 작업, Udemy의 mark Price의 강의](https://github.com/younari/tastySwift/tree/master/1030_rainyshinycloudy)<br>



